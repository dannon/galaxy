{"version":3,"sources":["../../../src/mvc/history/history-contents.js"],"names":["define","CONTROLLED_FETCH_COLLECTION","HDA_MODEL","HDCA_MODEL","HISTORY_PREFS","BASE_MVC","AJAX_QUEUE","_super","PaginatedCollection","HistoryContents","extend","LoggableMixin","_logNamespace","model","attrs","options","history_content_type","HistoryDatasetAssociation","collection_type","HistoryListDatasetCollection","HistoryPairDatasetCollection","HistoryListPairedDatasetCollection","HistoryListOfListsDatasetCollection","msg","console","warn","validationError","limitPerPage","limitPerProgressiveFetch","order","urlRoot","Galaxy","root","url","this","historyId","initialize","models","prototype","call","history","setHistoryId","includeDeleted","includeHidden","idAttribute","newId","_setUpWebStorage","initialSettings","storage","HistoryPrefs","id","historyStorageKey","trigger","on","include-deleted","newVal","include-hidden","comparators","_","clone","name","buildComparator","ascending","name-dsc","hid","hid-asc","running","filter","c","inReadyState","runningAndActive","get","getByHid","findWhere","haveDetails","all","hasDetails","hidden","deleted","visibleAndUndeleted","setIncludeDeleted","setting","isBoolean","result","setIncludeHidden","fetch","details","prefs","toJSON","isEmpty","expandedIds","values","join","_buildFetchData","v","_fetchParams","concat","_buildFetchFilters","superFilters","filters","purged","visible","defaults","getTotalItemCount","contentsShown","fetchUpdated","since","remove","update_time-ge","toISOString","fetchDeleted","self","undefined","always","fetchHidden","fetchAllDetails","detailsFlag","data","fetchCollectionCounts","keys","_filterAndUpdate","filterParams","updateWhat","updateArgs","then","fetched","reduce","modelArray","currJson","i","ajaxQueue","ajaxFn","args","collection","AjaxQueue","slice","reverse","map","content","fn","isString","apply","deferred","progressivelyFetchDetails","_recursivelyFetch","offset","_options","view","detailKeys","limit","reset","defer","fail","reject","done","response","notify","length","allFetched","resolve","jQuery","Deferred","limitPerCall","searchAttributes","isCopyable","contentsJSON","copyableModelClasses","isObject","contains","model_class","copy","json","type","contentType","LibraryDatasetDatasetAssociation","HistoryDatasetCollectionAssociation","xhr","ajax","method","JSON","stringify","source","add","parse","error","status","message","createHDCA","elementIdentifiers","collectionType","hdca","history_id","element_identifiers","save","haveSearchDetails","has","attributes","matches","matchesWhat","Backbone","Collection","toString"],"mappings":"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","file":"history-contents.js"}