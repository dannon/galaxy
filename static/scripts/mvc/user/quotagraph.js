define(["mvc/base-mvc","utils/localization","mvc/history/history-model"],function(a,b,c){"use strict";var d=Backbone.View.extend({initialize:function(){var a=this;this.setElement("<div/>"),this.model=new c.HistoryCollection(null,{includeDeleted:!0}),this.model.fetch({success:function(){a.render()},error:function(){console.error("Failed to fetch usage information.")}})},render:function(){require("libs/Chart.js");var a=_.template(["<h2>Galaxy Quota Usage</h2>","<% _.each(histories, function(history) { %>","<li>","<%- history %>","</li>","<% }); %>"].join(""));this.$el.html(a({histories:this.model.models}));var b=$("<canvas/>");$(this.$el).append(b);var c=[],d=360/this.model.models.length,e=0;_.each(this.model.models,function(a){e+=d;var b={name:a.attributes.name,size:a.attributes.size,color:Color("hsl("+e+",60%,50%)").hexString()};c.push(b)}),new Chart(b,{type:"pie",data:{labels:_.pluck(c,"name"),datasets:[{data:_.pluck(c,"size"),backgroundColor:_.pluck(c,"color"),hoverBackgroundColor:_.pluck(c,"color"),label:_.pluck(c,"name")}]},options:{hover:{mode:"single"}}})}});return{UserQuotaGraph:d}});
//# sourceMappingURL=../../../maps/mvc/user/quotagraph.js.map