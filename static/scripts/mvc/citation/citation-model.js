define(["libs/bibtex","mvc/base-mvc","utils/localization"],function(a,b,c){a=a||window.BibtexParser;var d="citation",e=Backbone.Model.extend(b.LoggableMixin).extend({_logNamespace:d,defaults:{content:""},initialize:function(){var b;try{b=a(this.attributes.content)}catch(c){return}if(b.errors.length){var d=b.errors.reduce(function(a,b){return a+"; "+b});this.log("Error parsing bibtex: "+d)}if(this._fields={},this.entry=_.first(b.entries),this.entry){var e=this.entry.Fields;for(var f in e){var g=e[f],h=f.toLowerCase();this._fields[h]=g}}},entryType:function(){return this.entry?this.entry.EntryType:void 0},fields:function(){return this._fields}}),f=Backbone.Collection.extend(b.LoggableMixin).extend({_logNamespace:d,urlRoot:Galaxy.root+"api",partial:!0,model:e}),g=f.extend({url:function(){return this.urlRoot+"/histories/"+this.history_id+"/citations"}}),h=f.extend({url:function(){return this.urlRoot+"/tools/"+this.tool_id+"/citations"},partial:!1});return{Citation:e,HistoryCitationCollection:g,ToolCitationCollection:h}});
//# sourceMappingURL=../../../maps/mvc/citation/citation-model.js.map