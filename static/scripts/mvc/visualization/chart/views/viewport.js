define("mvc/visualization/chart/views/viewport",["exports","mvc/ui/ui-portlet","mvc/ui/ui-misc","utils/utils"],function(t,i,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});a(i),a(e);var n=a(s);t.default=Backbone.View.extend({initialize:function(t,i){var e=this;this.app=t,this.chart=this.app.chart,this.options=i,this.setElement($("<div/>").addClass("charts-viewport").append($("<div/>").addClass("info").append($("<span/>").addClass("icon")).append($("<span/>").addClass("text")))),this.$info=this.$(".info"),this.$icon=this.$(".icon"),this.$text=this.$(".text"),this._fullscreen(this.$el,55),this._createContainer("div"),this.chart.on("redraw",function(){e.app.deferred.execute(function(t){e._draw(t,e.chart)})}),this.chart.on("set:state",function(){var t=e.$(".charts-viewport-container"),i=e.$info,s=e.$icon,a=e.$text;switch(s.removeClass(),i.show(),a.html(e.chart.get("state_info")),e.chart.get("state")){case"ok":i.hide(),t.show();break;case"failed":s.addClass("icon fa fa-warning"),t.hide();break;default:s.addClass("icon fa fa-spinner fa-spin"),t.show()}})},show:function(){this.$el.show()},hide:function(){this.$el.hide()},_fullscreen:function(t,i){t.css("height",$(window).height()-i),$(window).resize(function(){t.css("height",$(window).height()-i)})},_createContainer:function(t,i){t=t||"div",i=i||1,this.$(".charts-viewport-container").remove(),this.targets=[];for(var e=0;e<i;e++){var s=n.default.uid(),a=$("<div/>").addClass("charts-viewport-container").width(parseInt(100/i)+"%").append($("<"+t+' class="charts-viewport-canvas" />').attr("id",s));this.$el.append(a),this.targets.push(s)}},_draw:function(t,i){var e="true"==i.settings.get("__use_panels")?i.groups.length:1;this._createContainer(i.definition.tag,e),i.state("wait","Please wait...")}})});