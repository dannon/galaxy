define("mvc/visualization/chart/views/viewport",["exports","mvc/ui/ui-portlet","mvc/ui/ui-misc","utils/utils"],function(t,e,i,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(t,"__esModule",{value:!0});a(e),a(i);var n=a(s);t.default=Backbone.View.extend({initialize:function(t,e){var i=this;this.app=t,this.chart=this.app.chart,this.options=e,this.setElement($("<div/>").addClass("charts-viewport").append($("<div/>").addClass("info").append($("<span/>").addClass("icon")).append($("<span/>").addClass("text")))),this.$info=this.$(".info"),this.$icon=this.$(".icon"),this.$text=this.$(".text"),this._fullscreen(this.$el,55),this._createContainer("div"),this.chart.on("redraw",function(){i.app.deferred.execute(function(t){i._draw(t,i.chart)})}),this.chart.on("set:state",function(){var t=i.$(".charts-viewport-container"),e=i.$info,s=i.$icon,a=i.$text;switch(s.removeClass(),e.show(),a.html(i.chart.get("state_info")),i.chart.get("state")){case"ok":e.hide(),t.show();break;case"failed":s.addClass("icon fa fa-warning"),t.hide();break;default:s.addClass("icon fa fa-spinner fa-spin"),t.show()}})},show:function(){this.$el.show()},hide:function(){this.$el.hide()},_fullscreen:function(t,e){t.css("height",$(window).height()-e),$(window).resize(function(){t.css("height",$(window).height()-e)})},_createContainer:function(t,e){t=t||"div",e=e||1,this.$(".charts-viewport-container").remove(),this.targets=[];for(var i=0;i<e;i++){var s=n.default.uid(),a=$("<div/>").addClass("charts-viewport-container").width(parseInt(100/e)+"%").append($("<"+t+' class="charts-viewport-canvas" />').attr("id",s));this.$el.append(a),this.targets.push(s)}},_draw:function(t,e){var i="true"==e.settings.get("__use_panels")?e.groups.length:1;this._createContainer(e.plugin.tag,i),e.state("wait","Please wait...")}})});