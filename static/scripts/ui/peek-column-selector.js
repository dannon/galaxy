!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){function b(a){if(a.disabled&&"array"!==jQuery.type(a.disabled))throw new Error('"disabled" must be defined as an array of indeces: '+JSON.stringify(a));if(a.multiselect&&a.selected&&"array"!==jQuery.type(a.selected))throw new Error('Mulitselect rows need an array for "selected": '+JSON.stringify(a));if(!a.label||!a.id)throw new Error("Peek controls need a label and id for each control row: "+JSON.stringify(a));if(a.disabled&&a.disabled.indexOf(a.selected)!==-1)throw new Error("Selected column is in the list of disabled columns: "+JSON.stringify(a));return a}function c(b,c){return a("<div/>").addClass(s).text(b.label)}function d(b,d){var e=a("<td/>").html(c(b,d)).attr("data-"+u,d);return b.disabled&&b.disabled.indexOf(d)!==-1&&e.addClass(r),e}function e(a,b,c){var d=a.children("."+s);a.hasClass(q)?d.html(void 0!==b.selectedText?b.selectedText:b.label):d.html(void 0!==b.unselectedText?b.unselectedText:b.label)}function f(b,c){var f=d(b,c);return b.selected===c&&f.addClass(q),e(f,b,c),f.hasClass(r)||f.click(function(d){var f=a(this);if(!f.hasClass(q)){var g=f.parent().children("."+q).removeClass(q);g.each(function(){e(a(this),b,c)}),f.addClass(q),e(f,b,c);var h={},i=f.parent().attr("id"),j=f.data(u);h[i]=j,f.parents(".peek").trigger(m,h)}}),f}function g(b,c){var f=d(b,c);return b.selected&&b.selected.indexOf(c)!==-1&&f.addClass(q),e(f,b,c),f.hasClass(r)||f.click(function(d){var f=a(this);f.toggleClass(q),e(f,b,c);var g=f.parent().find("."+q).map(function(b,c){return a(c).data(u)}),h={},i=f.parent().attr("id"),j=jQuery.makeArray(g);h[i]=j,f.parents(".peek").trigger(m,h)}),f}function h(a,b){for(var c=[],d=0;d<a;d+=1)c.push(b.multiselect?g(b,d):f(b,d));return c}function i(b,c,d){var e=a("<tr/>").attr("id",c.id).addClass(o);if(d){var f=a("<td/>").addClass(p).text(c.label+":");e.append(f)}return e.append(h(b,c)),e}function j(c){c=jQuery.extend(!0,{},k,c);var d=a(this).addClass(l),e=d.find("table"),f=e.find("th").length,g=e.find("tr").length,h=e.find("td[colspan]").map(function(b,d){var e=a(this);return e.text()&&e.text().match(new RegExp("^"+c.commentChar))?a(this).css("color","grey").parent().get(0):null});if(c.hideCommentRows&&(h.hide(),g-=h.length),c.includePrompts){var j=a("<th/>").addClass("top-left").text(c.topLeftContent).attr("rowspan",g);e.find("tr").first().prepend(j)}var m=e.find("th:not(.top-left)").each(function(b,d){var e=a(this),f=e.text().replace(/^\d+\.*/,""),g=c.columnNames[b]||f;e.attr("data-"+v,g).text(b+1+(g?"."+g:""))});return c.renameColumns&&m.addClass(t).click(function(){var b=a(this),d=b.index()+(c.includePrompts?0:1),e=b.data(v),f=prompt("New column name:",e);if(null!==f&&f!==e){b.text(d+(f?"."+f:"")).data(v,f).attr("data-",v,f);var g=jQuery.makeArray(b.parent().children("th:not(.top-left)").map(function(){return a(this).data(v)}));b.parents(".peek").trigger(n,g)}}),c.controls.forEach(function(a,d){b(a);var g=i(f,a,c.includePrompts);e.find("tbody").append(g)}),this}var k={renameColumns:!1,columnNames:[],commentChar:"#",hideCommentRows:!1,includePrompts:!0,topLeftContent:"Columns:"},l="peek-column-selector",m="peek-column-selector.change",n="peek-column-selector.rename",o="control",p="control-prompt",q="selected",r="disabled",s="button",t="renamable-header",u="column-index",v="column-name";jQuery.fn.extend({peekColumnSelector:function(a){return this.map(function(){return j.call(this,a)})}})});
//# sourceMappingURL=../../maps/ui/peek-column-selector.js.map